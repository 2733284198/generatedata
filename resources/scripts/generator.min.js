define("manager pluginManager utils queue constants lang moment jquery-ui".split(" "),function(j,ia,e,Ia,h,f,u){var Q=0,v=[],k=null,w=!0,n=null,E=null,F,l,r,G,R,y="",s=!1,z=!1,S=1,A=null,p=null,g=[],m=null,ja=function(a){a.preventDefault();a=$(a.target).closest("tr").data("id");a=T(a);U(a)},U=function(a){e.startProcessing();var b=$.evalJSON(a.content),c=b.hasOwnProperty("dataTypes")?b.dataTypes.length:4;H(c);m=a.configuration_id;$("#gdDataSetName").val(a.configuration_name);$("#gdNumRowsToGenerate").val(b.numResults); $("input[name=gdExportTarget]").each(function(){this.value==b.exportTarget&&(this.checked=!0)});var d=b.countries;$("#gdCountries option").each(function(){this.selected=-1!=$.inArray(this.value,d)?!0:!1});$("#gdCountries").trigger("liszt:updated");I();B(b.selectedExportType,!0);j.loadExportType(b.selectedExportType,b.exportTypes);if(b.hasOwnProperty("dataTypes")){for(var c=b.dataTypes.length,q=t(),h=[],g=0;g<c;g++){var k=b.dataTypes[g],l=q[g];$("#gdTitle_"+l).val(k.title);$("#gdDataType_"+l).val(k.dataType); V($("#gdDataType_"+l)[0]);k.rowID=l;h.push(k)}j.loadDataTypeRows(h)}a=u.unix(a.last_updated_unix).format("h:mm A, MMM Do YYYY");$("#gdDataSetStatusLine").html(f.last_edited+" "+a);e.stopProcessing();W()},X=function(a){1==a?($("#gdGenerateSubtab1").show(),$("#gdGenerateSubtab2").hide(),$("#gdEmptyForm,#gdLoadLink").show()):($("#gdGenerateSubtab1").hide(),$("#gdGenerateSubtab2").show(),$("#gdEmptyForm,#gdLoadLink").hide());return!1},ka=function(){h.DEMO_MODE?D():Y();return!1},Y=function(){var a=$("#gdDataSetName").val(); if(!a)return $("#gdDataSetName").css({backgroundColor:"#770000",borderTopColor:"#550000",borderLeftColor:"#550000",borderBottomColor:"#550000"}).animate({backgroundColor:"#ffffff",borderTopColor:"#cccccc",borderLeftColor:"#cccccc",borderBottomColor:"#cccccc"},1500),!1;for(var b=[],c=t(),d=0;d<c.length;d++){var q=c[d],h=$("#gdDataType_"+q).val();""!==h&&b.push({title:$("#gdTitle_"+q).val(),dataType:h,data:j.serializeDataTypeRow(h,q)})}a={action:"saveConfiguration",dataSetName:a,exportTarget:J(),numResults:K(), countries:v,dataTypes:b,exportTypes:j.serializeExportTypes(),selectedExportType:k};null!==m&&(a.configurationID=m);e.startProcessing();$.ajax({url:"ajax.php",type:"POST",dataType:"json",data:a,success:function(a){a.success&&(m=a.content,a=u.unix(a.lastUpdated).format("h:mm A, MMM Do YYYY"),$("#gdDataSetStatusLine").html(f.last_saved+" "+a).css("color","#7fbcf8").animate({color:"#666666"},1400),Z())},error:function(){}})},M=function(a){a=a.toString();if(a.match(/\D/)||0===a||""===a)return e.clearValidationErrors($("#gdMainTab1Content")), e.addValidationErrors({els:[$("#gdNumRowsToAdd")],error:f.no_num_rows}),e.displayValidationErrors("#gdMessages"),!1;for(var b=[],c=parseInt(a,10),d=1;d<=c;d++){var q=++Q;b.push(q);var g=$("#gdTableRowTemplate").html().replace(/%ROW%/g,q);$("#gdTableRows").append('<li class="gdTableRow" id="row_'+q+'">'+g+"</li>")}L();$("body").addClass("forceRedraw").removeClass("forceRedraw");j.publish({sender:"core-generator",type:h.EVENT.DATA_TABLE.ROW.ADD,numRows:a,rowIDs:b})},aa=function(){var a=[];$(".gdDeleteRows:checked").each(function(){var b= $(this).closest(".gdTableRow"),c=b.attr("id");null!==c&&(c=parseInt(c.replace(/row_/g,""),10),b.remove(),a.push(c))});j.publish({sender:"core-generator",type:h.EVENT.DATA_TABLE.ROW.DELETE,rowIDs:a});L()},L=function(){$("#gdTableRows>li .gdColOrder").each(function(a){$(this).html(a+1)})},la=function(a){a=a.target;var b=null,b=$(a).closest(".gdTableRow");a.checked?(F=!0,b.addClass("gdDeletedRow").effect("highlight",{color:"#cc0000"},1E3),b=h.EVENT.DATA_TABLE.ROW.CHECK_TO_DELETE):(F&&b.stop(!0,!0),b.removeClass("gdDeletedRow"), b=h.EVENT.DATA_TABLE.ROW.UNCHECK_TO_DELETE,F=!1);j.publish({sender:"core-generator",type:b,row:a})},ma=function(a){var b=$.extend({requireConfirmation:!0,numRows:4},a);b.requireConfirmation?$("#gdEmptyFormDialog").html("<p>"+f.confirm_empty_form+"</p>").dialog({title:f.please_confirm,modal:!0,width:400,buttons:[{text:f.yes,click:function(){H(b.numRows);$(this).dialog("close")}},{text:f.no,click:function(){$(this).dialog("close")}}]}):H(b.numRows)},H=function(a){$("#gdDataSetName").val("");$("#gdTableRows .gdDeleteRows").attr("checked", "checked");aa();M(a);m=null;B($(".gdDefaultExportType").data("exportType"),!0);j.resetExportTypes();$("#gdDataSetStatusLine").html(f.not_saved);j.publish({sender:"core-generator",type:h.EVENT.DATA_TABLE.CLEAR})},I=function(){v.length=0;$("#gdCountries option").each(function(){this.selected&&v.push(this.value)});j.publish({sender:"core-generator",type:h.EVENT.COUNTRIES.CHANGE,countries:v})},B=function(a,b){if(a!=k){null!==k&&($("#gdExportTypeTabs>ul>li").removeClass("gdSelected"),$("#gdExportType_"+ a).addClass("gdSelected"));$("#gdColTitleTop,#gdColTitleBottom").html(f.row_label);j.publish({sender:"core-generator",type:h.EVENT.RESULT_TYPE.CHANGE,newExportType:a,oldExportType:k});w&&ba(a,b);var c=$("#gdExportType_"+a).data("compatibleExportTargets").split(",");$("input[name=gdExportTarget]").attr("disabled","disabled");$("#gdGenerateSection label").addClass("gdDisabled");for(var d=null,e=0;e<c.length;e++)$("#gdExportTarget_"+c[e]).removeAttr("disabled"),$("#gdExportTarget_"+c[e]+"_label").removeClass("gdDisabled"), null===d&&(d=c[e]);$("input[name=gdExportTarget]:checked:disabled").length&&$("#gdExportTarget_"+d).attr("checked","checked");k=a}},ba=function(a,b){0<$("#gdExportTypeAdditionalSettings_"+k).length&&w&&(!0===b?$("#gdExportTypeAdditionalSettings_"+k).hide():$("#gdExportTypeAdditionalSettings_"+k).hide("blind",h.EXPORT_TYPE_SETTINGS_BLIND_SPEED));null===k||!0===b?$("#gdExportTypeAdditionalSettings_"+a).show():$("#gdExportTypeAdditionalSettings_"+a).show("blind",h.EXPORT_TYPE_SETTINGS_BLIND_SPEED,function(){w= !0;$("#gdShowSettingsLink span").html("-");$("#gdShowSettingsLink a").html(f.hide_data_format_options)})},na=function(a){a=a.target;var b=$(a).closest(".gdTableRow"),c=parseInt($(b).attr("id").replace(/^row_/,""),10),b=$(b).find(".gdDataType").val();j.publish({sender:"core-generator",type:h.EVENT.DATA_TABLE.ROW.EXAMPLE_CHANGE+"__"+b,rowID:c,value:a.value})},oa=function(a){E=a.target.value},pa=function(a){a.target.value!=E&&V(a.target)},V=function(a){var b=parseInt($(a).attr("id").replace(/^gdDataType_/, ""),10);E=a=a.value;if(""===a)$("#gdColExamples_"+b+",#gdColOptions_"+b+",#gdColHelp_"+b).html("");else{var c=null,c=null,c=$("#gdDataTypeExamples_"+a).html(),c=""!==c?c.replace(/%ROW%/g,b):"&nbsp;"+f.no_examples_available;$("#gdColExamples_"+b).html(c);c=$("#gdDataTypeOptions_"+a).html();c=""!==c?c.replace(/%ROW%/g,b):f.no_options_available;$("#gdColOptions_"+b).html(c);""!==$("#gdDataTypeHelp_"+a).html()?$("#gdColHelp_"+b).html($("#gdHelpIcon").html().replace(/%ROW%/g,b)):$("#gdColHelp_"+b).html(" "); j.publish({sender:"core-generator",type:h.EVENT.DATA_TABLE.ROW.TYPE_CHANGE,rowID:b,dataTypeModuleID:a})}},t=function(){for(var a=$("#gdTableRows").sortable("toArray"),b=[],c=0;c<a.length;c++){var d=a[c].replace(/row_/g,"");b.push(d)}return b},da=function(){l=K();e.clearValidationErrors($("#gdMainTab1Content"));(l.match(/\D/)||0===l||""===l)&&e.addValidationErrors({els:$("#gdNumRowsToGenerate"),error:f.invalid_num_results});for(var a=t(),b=[],c={},d=0;d<a.length;d++){var g=a[d],C=$("#gdDataType_"+ g).val();""!==C&&(c.hasOwnProperty(C)||(c[C]=[]),c[C].push(g),b.push(g))}if(b.length){a=[];for(d=0;d<b.length;d++)g=$("#gdTitle_"+b[d]),""===$.trim(g.val())&&a.push(g[0]);a.length&&(d=f.row_label_plural,f.exportTypePlugins[k].hasOwnProperty("row_label_plural")&&(d=f.exportTypePlugins[k].row_label_plural),e.addValidationErrors({els:a,error:f.please_enter_all+" "+d+"."}))}else e.addValidationErrors({els:null,error:f.no_data});e.addValidationErrors(j.validateDataTypes(c));b=j.validateExportType({exportType:k, rows:b});$.isArray(b)?e.addValidationErrors(b):e.addValidationErrors({els:null,error:f.export_type_validate_error});if(e.getValidationErrors().length)return e.displayValidationErrors("#gdMessages"),!1;l=parseInt(l,10);b=J();c=t().toString();$("#gdRowOrder").val(c);$("#gdExportType").val(k);$("#gdNumCols").val(Q);n.setOption("lineWrapping",!1);n.scrollTo(0,0);n.setValue("");j.publish({sender:"core-generator",type:h.EVENT.GENERATE,exportTarget:b,exportType:k,editor:n});"block"==$("#gdMessages").css("display")&& $("#gdMessages .gdMessageClose").trigger("click");if("inPage"==b)return b=$("#gdData").serialize()+"&action=generateInPage&gdBatchSize="+h.GENERATE_IN_PAGE_BATCH_SIZE,null!==m&&(b+="&configurationID="+m),X(2),e.startProcessing(),r=0,s=!0,z=!1,$("#gdGenerateCount").html(e.formatNumWithCommas(r)),$("#gdGenerateTotal").html(e.formatNumWithCommas(l)),$("#gdProgressMeter").attr("max",l),$("#gdProgressMeter").attr("value",0),G=1,R=b,y="",ca(),!1;"newTab"==b?$("#gdData").attr({target:"blank",action:"generate.php"}): "promptDownload"==b&&$("#gdData").attr({target:"blank",action:"generate.php"})},ca=function(){$("#gdGenerationPanelCancel").removeClass("gdDisabledLink");var a=R+"&gdCurrentBatchNum="+G;null!==m&&(a+="&configurationID="+m);$.ajax({url:"ajax.php",type:"POST",data:a,dataType:"json",contentType:"application/x-www-form-urlencoded;charset=utf-8",success:qa,error:function(){s=!1;e.stopProcessing()}})},qa=function(a){if(a.success)if(r=r+h.GENERATE_IN_PAGE_BATCH_SIZE>l?l:r+h.GENERATE_IN_PAGE_BATCH_SIZE,$("#gdGenerateCount").html(e.formatNumWithCommas(r)), $("#gdProgressMeter").attr("value",r),y+=decodeURIComponent(escape(a.content)),n.setValue(y),z)s=!1,e.stopProcessing(),$("#gdGenerationPanelCancel").addClass("gdDisabledLink"),$("#gdProgressMeter").attr("value",l);else if(a.isComplete){if(s=!1,e.stopProcessing(),$("#gdGenerationPanelCancel").addClass("gdDisabledLink"),null!==m){a=m;for(var b=l,c="",d=0;d<g.length;d++)g[d].configuration_id==a&&(c=parseInt(g[d].num_rows_generated,10)+b,g[d].num_rows_generated=c);b=$("#gdAccountDataSets tbody tr");for(d= 0;d<b.length;d++)$(b[d]).data("id")==a&&$(b[d]).find(".gdDataSetNumRowsGenerated").html(e.formatNumWithCommas(c));ea()}}else G++,ca();else s=!1,e.stopProcessing(),console.warn("response.success fail")},ra=function(){$("#gdPluginInstallation").dialog({modal:!0,resizable:!0,title:"Reset Plugins",width:800,height:400,open:function(){e.insertModalSpinner({modalID:"gdPluginInstallation"});e.playModalSpinner("gdPluginInstallation");ia.installPlugins({errorHandler:null,onCompleteHandler:function(){e.pauseModalSpinner("gdPluginInstallation"); $("#gdPluginInstallation").dialog("option","buttons",[{text:f.refresh_page,click:function(){window.location.reload(!0)}}])}})},buttons:[{text:f.close,click:function(){$(this).dialog("close")}}]});return!1},sa=function(a){$("#gdTextSize li").removeClass("gdSelected");var b=$(a.target).attr("class");$(a.target).addClass("gdSelected");$("#gdGenerateSubtab2 .CodeMirror").removeClass("CodeMirror_small CodeMirror_medium CodeMirror_large").addClass("CodeMirror_"+b);n.refresh()},J=function(){return $("input[name=gdExportTarget]:checked").val()}, K=function(){return $("#gdNumRowsToGenerate").val()},ta=function(a){a.preventDefault();a=$(a.target).closest("li");N(a)},N=function(a){var b=$(a).data("module");a=$(a).find("a");$("#gdDataSetHelpNav a").removeClass("gdSelected");$(a).addClass("gdSelected");$("#gdDataSetHelpNav").scrollTop($(a).offset().top);$("#gdFocusedDataTypeHeader").html($(a).html());null!==A&&$("#gdDataTypeHelp_"+A).addClass("hidden");$("#gdDataTypeHelp_"+b).removeClass("hidden");A=b},ua=function(a){a=$(a.target).closest(".gdTableRow"); var b=a.find(".gdDataType").val();O({tab:3,dataType:b});j.publish({sender:"core-generator",type:h.EVENT.DATA_TABLE.ROW.HELP_DIALOG_OPEN,rowElement:a})},O=function(a){a=$.extend({tab:1,dataType:null},a);$("#gdMainDialogTab"+a.tab).trigger("click");$(".gdHelpSection").removeAttr("style");$("#gdMainDialog").dialog({title:'generate<span style="color:#48b34d">data</span>.com',dialogClass:"gdMainDialog",width:800,minHeight:400,modal:!0,resizable:!1,buttons:[{text:f.close,click:function(){$(this).dialog("close")}}]}); if(null!==a.dataType){var b=$("#gdDataSetHelpNav li[data-module='"+a.dataType+"']")[0];N(b)}e.insertModalSpinner({modalID:"gdMainDialog"});2==a.tab&&x();return!1},W=function(){$("#gdMainDialog").dialog("close")},va=function(a){P(a.target)},wa=function(a){if(-1===$.inArray(a.target.nodeName.toUpperCase(),["INPUT","A"])){var b=$(a.target).closest("tr").find(".gdDeleteDataSets");$(a.target).closest("tr").find(".gdDeleteDataSets").attr("checked")?$(b).removeAttr("checked"):$(a.target).closest("tr").find(".gdDeleteDataSets").attr("checked", "checked");P(b[0])}},P=function(a){a.checked?$(a).closest("tr").addClass("gdDeletedDataSetRow"):$(a).closest("tr").removeClass("gdDeletedDataSetRow");x()},xa=function(a){a=a.target.checked;for(var b=$(".gdDeleteDataSets"),c=0;c<b.length;c++)b[c].checked=a,P(b[c]);x()},ya=function(){},x=function(){var a=$(".gdDeleteDataSets:checked");a.length?(a="Delete "+a.length+" Data Set(s)",$("#gdMainDialog").dialog("option","buttons",[{text:a,"class":"gdDeleteDataSetsBtn",click:function(){if(h.DEMO_MODE)W(), D();else{for(var a=[],c=$("#gdAccountDataSets tbody input:checked"),d=0;d<c.length;d++)a.push($(c[d]).closest("tr").data("id"));$.ajax({url:"ajax.php",type:"POST",dataType:"JSON",data:{action:"deleteDataSets",configurationIDs:a},success:za,error:fa})}}},{text:f.close,click:function(){$(this).dialog("close")}}])):$("#gdMainDialog").dialog("option","buttons",[{text:f.close,click:function(){$(this).dialog("close")}}])},za=function(a){if(a.success){for(var b=[],c=0;c<g.length;c++)-1==$.inArray(g[c].configuration_id, a.content)&&b.push(g[c]);g=b;$("#gdAccount_NumSavedDataSets").html(g.length);ga();x()}},Z=function(){e.startProcessing();$.ajax({url:"ajax.php",type:"POST",dataType:"JSON",data:{action:"getAccount"},success:Aa,error:fa})},Aa=function(a){e.stopProcessing();$("#gdActionIcons .loading").removeClass("loading");g=a.content.configurations;p=a.content;delete p.configurations;ea();ga()},Ba=function(a){a.preventDefault();if(h.DEMO_MODE)D();else{var b=$("#gdUserAccount_firstName"),c=$.trim(b.val()),d=$("#gdUserAccount_lastName"), f=$.trim(d.val()),g=$("#gdUserAccount_email"),k=$.trim(g.val()),j=$("#gdUserAccount_password");a=$.trim(j.val());var l=$("#gdUserAccount_password2"),m=$.trim(l.val()),n=!1;""===c?(b.addClass("gdProblemField"),n=!0):b.removeClass("gdProblemField");""===f?(d.addClass("gdProblemField"),n=!0):d.removeClass("gdProblemField");""===k?(g.addClass("gdProblemField"),n=!0):g.removeClass("gdProblemField");if(""!==a||""!==m)""===a?(j.addClass("gdProblemField"),n=!0):j.removeClass("gdProblemField"),""===m?(l.addClass("gdProblemField"), n=!0):l.removeClass("gdProblemField"),a!==m?(j.addClass("gdProblemField"),l.addClass("gdProblemField"),n=!0):(j.removeClass("gdProblemField"),l.removeClass("gdProblemField"));n||(e.playModalSpinner("gdMainDialog"),b={action:"updateAccount",accountID:p.accountID,firstName:c,lastName:f,email:k},""!==a&&(b.password=a),$.ajax({url:"ajax.php",type:"POST",data:b,dataType:"json",success:function(a){e.pauseModalSpinner("gdMainDialog");a.success&&($("#gdMainDialogTab1Message").show("blind"),$(j).val(""),$(l).val(""))}, error:function(a){e.pauseModalSpinner("gdMainDialog");console.log("error response: ",a)}}))}},ea=function(){if(p.isAnonymous)$("#gdAccount_AccountType").html(f.anonymous_admin_account);else{var a="",a="admin"==p.accountType?f.admin:f.user;$("#gdAccount_AccountType").html(a)}$("#gdUserAccount_firstName").val(p.firstName);$("#gdUserAccount_lastName").val(p.lastName);$("#gdUserAccount_email").val(p.email);$("#gdAccount_NumSavedDataSets").html(g.length);$("#gdAccount_DateAccountCreated").html(u.unix(p.dateCreated).format("MMM Do, YYYY")); a=parseInt(p.numRowsGenerated,10);$("#gdAccount_TotalRowsGenerated").html(e.formatNumWithCommas(a))},ga=function(){if(g.length){$("#gdNoAccountDataSets").addClass("hidden");for(var a="",b="",c=0;c<g.length;c++)var b=g[c],d=u.unix(b.date_created_unix).format("MMM Do, YYYY"),f=u.unix(b.last_updated_unix).format("MMM Do, YYYY"),b='<tr data-id="'+b.configuration_id+'"><td class="leftAligned">'+b.configuration_name+'</td><td class="leftAligned">'+d+'</td><td class="leftAligned">'+f+'</td><td align="center"><input type="checkbox" class="gdDataSetStatus" id="gdDataSetStatus_'+ b.configuration_id+'" '+("public"==b.status?'checked="checked"':"")+' /></td><td class="gdDataSetNumRowsGenerated" align="center">'+e.formatNumWithCommas(b.num_rows_generated)+'</td><td align="center"><a href="#">load</a></td><td align="center" class="gdDelDataSetCell"><input type="checkbox" class="gdDeleteDataSets" value="'+b.configuration_id+'"/></td></tr>',a=a+b;$("#gdAccountDataSets tbody").html(a);$("#gdAccountDataSets").removeClass("hidden")}else $("#gdAccountDataSets tbody").html(""),$("#gdNoAccountDataSets").removeClass("hidden"), $("#gdAccountDataSets").addClass("hidden")},fa=function(a){console.log("on error");console.log(a)},T=function(a){for(var b={},c=0;c<g.length;c++)g[c].configuration_id==a&&(b=g[c]);return b},Ca=function(a){a.preventDefault();$(a.target).hasClass("gdDisabledLink")||s&&(z=!0)},Da=function(a){a.preventDefault();X(1);s&&(z=!0)},Ea=function(){null===m?($("#gdLinkToDataSet_incomplete").removeClass("hidden"),$("#gdLinkToDataSet_complete").addClass("hidden")):($("#gdLinkToDataSet_incomplete").addClass("hidden"), $("#gdLinkToDataSet_complete").removeClass("hidden"));$("#gdLinkToDataSetDialog").dialog({title:f.link_to_data_set,dialogClass:"gdMainDialog",width:500,modal:!0,resizable:!1,open:function(){if(null!==m){var a=window.location.href.replace(/(#.*)/,""),a=a.replace(/(\?.*)/,"");$("#gdLinkURL").data("url",a);"public"==T(m).status?($("#gdDataSetPublic").attr("checked","checked"),$("#gdLinkURL").val(a+"?load="+m).removeClass("gdDisabled").removeAttr("disabled").select()):($("#gdDataSetPublic").removeAttr("checked"), $("#gdLinkURL").val("-").attr("disabled","disabled").addClass("gdDisabled"))}},buttons:[{text:f.close,click:function(){$(this).dialog("close")}}]});return!1},Fa=function(a){var b=null;a.target.checked?(b="public",a=$("#gdLinkURL").data("url"),$("#gdLinkURL").removeClass("gdDisabled").removeAttr("disabled").val(a).select()):(b="private",$("#gdLinkURL").addClass("gdDisabled").attr("disabled","disabled").val("-"));ha(m,b)},Ga=function(a){e.startProcessing();var b=$(a.target).closest("tr").data("id"); ha(b,a.target.checked?"public":"private")},ha=function(a,b){var c={action:"saveDataSetVisibilityStatus",configurationID:a,status:b,time:Date.now()};$.ajax({url:"ajax.php",type:"POST",dataType:"json",data:c,success:function(a){if(a.success){var b=parseInt(a.content,10);a=a.newStatus;for(var c=0;c<g.length;c++)if(g[c].configuration_id==b){g[c].status=a;break}$("#gdDataSetStatus_"+b).length&&("public"==a?$("#gdDataSetStatus_"+b).attr("checked","checked"):$("#gdDataSetStatus_"+b).removeAttr("checked"))}e.stopProcessing()}, error:function(){e.stopProcessing()}})},D=function(){$('<div><p>This is a demo only. Please download the script to save your Data Sets.<br /><a href="https://github.com/benkeen/generatedata" target="_blank">https://github.com/benkeen/generatedata</a></p></div>').dialog({title:"Sorry!",width:500,modal:!0,buttons:[{text:f.close,click:function(){$(this).dialog("close")}}]})},Ha=function(a){h.DEMO_MODE&&(D(),a.preventDefault())};j.registerCoreModule("core-generator",{run:function(){e.startProcessing(); Z();$("#gdDataSetName").focus();$("#gdCountries").chosen().change(I);$("#gdGenerateButton,#gdRegenerateButton").on("click",da);$("#gdBackButton").on("click",Da);$("#gdShowSettingsLink").bind("click",function(){w?$("#gdExportTypeAdditionalSettings_"+k).hide("blind",h.EXPORT_TYPE_SETTINGS_BLIND_SPEED,function(){w=!1;$("#gdShowSettingsLink span").html("+");$("#gdShowSettingsLink a").html(f.show_data_format_options)}):ba(k);return!1});$("#gdTableRows").on("change keyup",".gdDataType",pa);$("#gdTableRows").on("focus", ".gdDataType",oa);$("#gdTableRows").on("change",".gdDeleteRows",la);$("#gdTableRows").on("change",".gdColExamples select",na);$("#gdTableRows").sortable({handle:".gdColOrder",axis:"y",update:function(a,c){L();j.publish({sender:"core-generator",type:h.EVENT.DATA_TABLE.ROW.RE_SORT,row:c.item})}});$(document).on("click",".gdMessageClose",function(a){$(a.target).closest(".gdMessage").hide("blind",null,500);return!1});$("#gdData").bind("submit",da);$("#gdExportTypeTabs>ul>li").bind("click",function(a){B($(a.target).data("exportType"))}); $(".gdAddRowsBtn").bind("click",function(){M($("#gdNumRowsToAdd").val())});$(".gdDeleteRowsBtn").bind("click",aa);$("#gdResetPluginsBtn").bind("click",ra);$("#gdTextSize").on("click","li",sa);$("#gdGenerationPanelCancel").on("click",Ca);$("#gdDataSetPublic").on("click",Fa);$("#gdSettingsForm").on("submit",Ha);$("#gdSaveBtn").on("click",ka);$("#gdSaveDataSet").on("click",Y);$("#gdEmptyForm").on("click",ma);$("#gdDataSetLink").on("click",Ea);$("#gdLogout").on("click",function(){$.ajax({url:"ajax.php", type:"POST",dataType:"json",data:{action:"logout"},success:function(a){a.success&&(window.location="login.php")},error:function(){}})});$("#gdUserAccount").on("click",function(){return O({tab:1})});$("#gdLoadLink").on("click",function(){return O({tab:2})});$("#gdAccountDataSets").on("click","a",ja);$("#gdAccountDataSets").on("change",".gdDeleteDataSets",va);$("#gdAccountDataSets").on("click",wa);$(".gdDeleteDataSetsBtn").bind("click",ya);$("#gdDataSetHelpNav").on("click","a",ta);$("#gdTableRows").on("click", ".ui-icon-help",ua);$("#gdSelectAllDataSets").on("click",xa);$("#gdDataSetStatusLine").html(f.not_saved);$("#gdMainDialog").on("click",".gdDataSetStatus",Ga);$("#gdUpdateAccountInfo").on("click",Ba);$("#gdMainDialogTabs ul li").each(function(){var a=parseInt($(this).attr("id").replace(/^gdMainDialogTab/,""),10);$(this).bind("click",function(){e.selectTab({tabGroup:"dialogTabs",tabIDPrefix:"gdMainDialogTab",newTab:a,oldTab:S});S=a;if("block"==$("#gdMainDialog").css("display"))switch(a){case 1:$("#gdMainDialog").dialog("option", "buttons",[{text:f.close,click:function(){$(this).dialog("close")}}]);break;case 2:x();break;case 3:if($("#gdMainDialog").dialog("option","buttons",[{text:f.close,click:function(){$(this).dialog("close")}}]),null===A){var c=$("#gdDataSetHelpNav li").not(".gdDataTypeHeader");N(c[0])}}})});var a=$("#gdExportTypeTabs li.gdSelected").data("exportType");B(a);I();M(4);n=CodeMirror.fromTextArea($("#gdGeneratedData")[0],{mode:"xml",readOnly:!0,lineNumbers:!0});$(".CodeMirror").addClass("CodeMirror_medium"); $(document).tooltip({position:{my:"center bottom-6",at:"center top"}});a=e.getParamByName("load");null!==a&&/^\d+$/.test(a)&&(e.startProcessing(),$.ajax({url:"ajax.php",type:"POST",dataType:"json",data:{action:"getPublicDataSet",dataSetID:a},success:function(a){a.success&&U(a.content)},error:function(){e.stopProcessing()}}))}});return{getRowOrder:t,getVisibleRowOrderByRowNum:function(a){for(var b=t(),c=1,d=0;d<b.length;d++){if(b[d]==a)return c;c++}return!1},getCountries:function(){return v},getExportTarget:J, getNumRowsToGenerate:K}});