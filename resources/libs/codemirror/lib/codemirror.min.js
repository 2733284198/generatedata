window.CodeMirror=function(){function p(a,b){function c(d){(!h.onDragEvent||!h.onDragEvent(D,Xa(d)))&&kb(d)}function e(d){return 0<=d&&d<t.size}function g(d){for(var a=t;!a.lines;)for(var l=0;;++l){var b=a.children[l],E=b.chunkSize();if(d<E){a=b;break}d-=E}return a.lines[d]}function j(d,a){oa=!0;for(var l=a-d.height,b=d;b;b=b.parent)b.height+=l}function m(d,a){d.styles||d.highlight(R,d.stateAfter=Ya(Ma(d)),h.tabSize);return d.getContent(h.tabSize,a,h.lineWrapping)}function B(d){var a={line:0,ch:0}; qc(a,{line:t.size-1,ch:g(t.size-1).text.length},lb(d),a,a);ya=!0}function x(d){if(!h.onDragEvent||!h.onDragEvent(D,Xa(d))){H(d);var a=Za(d,!0),l=d.dataTransfer.files;if(a&&!h.readOnly)if(l&&l.length&&window.FileReader&&window.File){var b=l.length,E=Array(b),c=0;d=function(d,l){var k=new FileReader;k.onload=function(){E[l]=k.result;++c==b&&(a=A(a),n(function(){var d=W(E.join(""),a,a);la(a,d)})())};k.readAsText(d)};for(var k=0;k<b;++k)d(l[k],k)}else if(!mb||N(a,f.from)||N(f.to,a))try{(E=d.dataTransfer.getData("Text"))&& rc(function(){var d=f.from,l=f.to;la(a,a);mb&&W("",d,l);S(E);aa()})}catch(g){}}}function Sb(d){var a=Tb();d.dataTransfer.setData("Text",a);d.dataTransfer.setDragImage&&d.dataTransfer.setDragImage(s("img"),0,0)}function nb(d,a){if("string"==typeof d&&(d=Ub[d],!d))return!1;var l=ma;try{h.readOnly&&(ob=!0),a&&(ma=null),d(D)}catch(b){if(b!=sc)throw b;return!1}finally{ma=l,ob=!1}return!0}function tc(d){function a(){k=!0}var l=Vb(h.keyMap),b=l.auto;clearTimeout(uc);var E;if(E=b)E=Ga[J(d,"keyCode")],E=!("Ctrl"== E||"Alt"==E||"Shift"==E||"Mod"==E);E&&(uc=setTimeout(function(){Vb(h.keyMap)==l&&(h.keyMap=b.call?b.call(null,D):b)},50));E=Ga[J(d,"keyCode")];var c=!1,c=za&&pb;if(null==E||d.altGraphKey)return!1;J(d,"altKey")&&(E="Alt-"+E);if(J(d,c?"metaKey":"ctrlKey"))E="Ctrl-"+E;if(J(d,c?"ctrlKey":"metaKey"))E="Cmd-"+E;var k=!1,c=J(d,"shiftKey")?qb("Shift-"+E,h.extraKeys,h.keyMap,function(d){return nb(d,!0)},a)||qb(E,h.extraKeys,h.keyMap,function(d){if("string"==typeof d&&/^go[A-Z]/.test(d))return nb(d)},a):qb(E, h.extraKeys,h.keyMap,nb,a);k&&(c=!1);c&&(H(d),rb(),Ha&&(d.oldKeyCode=d.keyCode,d.keyCode=0));return c}function vc(d){ba||T();Ha&&27==d.keyCode&&(d.returnValue=!1);Na&&X()&&(Na=!1);if(!h.onKeyEvent||!h.onKeyEvent(D,Xa(d))){var a=J(d,"keyCode");La(16==a||J(d,"shiftKey"));var l=tc(d);za&&(Wb=l?a:null,!l&&(88==a&&J(d,pb?"metaKey":"ctrlKey"))&&S(""))}}function T(){if("nocursor"!=h.readOnly){if(!ba){if(h.onFocus)h.onFocus(D);ba=!0;-1==q.className.search(/\bCodeMirror-focused\b/)&&(q.className+=" CodeMirror-focused")}ha(); rb()}}function O(){if(ba){if(h.onBlur)h.onBlur(D);ba=!1;Aa&&n(function(){Aa&&(Aa(),Aa=null)})();q.className=q.className.replace(" CodeMirror-focused","")}clearInterval(Xb);setTimeout(function(){ba||(ma=null)},150)}function qc(d,a,l,b,c){if(!ob){var G=[];t.iter(d.line,a.line+1,function(d){G.push($a(d.text,d.markedSpans))});if(P)for(P.addChange(d.line,l.length,G);P.done.length>h.undoDepth;)P.done.shift();var k=L(G[0]),g=L(K(G)),e=d.ch,f=a.ch;if(k||g){if(k)for(var j=0,u;j<k.length;++j){var r=k[j],m= r.marker;if(null==r.from||(m.inclusiveLeft?r.from<=e:r.from<e)||"bookmark"==m.type&&r.from==e&&void 0!=r.from){var q=null==r.to||(m.inclusiveRight?r.to>=e:r.to>e);(u||(u=[])).push({from:r.from,to:q?null:r.to,marker:m})}}k=u;if(g)for(var j=0,C;j<g.length;++j)if(u=g[j],r=u.marker,null==u.to||(r.inclusiveRight?u.to>=f:u.to>f)||"bookmark"==r.type&&u.from==f)m=null==u.from||(r.inclusiveLeft?u.from<=f:u.from<f),(C||(C=[])).push({from:m?null:u.from-f,to:null==u.to?null:u.to-f,marker:r});g=C;C=1==l.length; j=K(l).length+(C?e:0);if(k)for(f=0;f<k.length;++f)u=k[f],null==u.to&&((r=sb(g,u.marker))?C&&(u.to=null==r.to?null:r.to+j):u.to=e);if(g)for(f=0;f<g.length;++f)u=g[f],null!=u.to&&(u.to+=j),null==u.from?(r=sb(k,u.marker),r||(u.from=j,C&&(k||(k=[])).push(u))):(u.from+=j,C&&(k||(k=[])).push(u));e=[$a(l[0],k)];if(!C){C=l.length-2;var n;if(0<C&&k)for(f=0;f<k.length;++f)null==k[f].to&&(n||(n=[])).push({from:null,to:null,marker:k[f].marker});for(f=0;f<C;++f)e.push($a(l[f+1],n));e.push($a(K(l),g))}l=e}wa(d, a,l,b,c)}}function Q(d,a){if(d.length){for(var l=d.pop(),b=[],c=l.length-1;0<=c;c-=1){var G=l[c],k=[],f=G.start+G.added;t.iter(G.start,f,function(d){k.push($a(d.text,d.markedSpans))});b.push({start:G.start,added:G.old.length,old:k});var e=G.start+G.old.length-1,h;h=U(K(k));var j=U(K(G.old));if(j)if(h){for(var m=h.length,r=j.length;0<=m&&0<=r&&h.charAt(m)==j.charAt(r);--m,--r);h=r+1}else h=j.length;else h=0;e={line:e,ch:h};wa({line:G.start,ch:0},{line:f-1,ch:g(f-1).text.length},G.old,e,e)}ya=!0;a.push(b)}} function wa(d,a,l,b,c){if(!ob){var G=!1,k=pa.text.length;h.lineWrapping||t.iter(d.line,a.line+1,function(d){if(!d.hidden&&d.text.length==k)return G=!0});if(d.line!=a.line||1<l.length)oa=!0;var e=a.line-d.line,ka=g(d.line),m=g(a.line),n=K(l);if(0==d.ch&&0==a.ch&&""==U(n)){for(var u=[],r=0,p=l.length-1;r<p;++r)u.push(new Oa(U(l[r]),L(l[r])));m.update(m.text,L(n));e&&t.remove(d.line,e,ab);u.length&&t.insert(d.line,u)}else if(ka==m)if(1==l.length)ka.update(ka.text.slice(0,d.ch)+U(l[0])+ka.text.slice(a.ch), L(l[0]));else{u=[];r=1;for(p=l.length-1;r<p;++r)u.push(new Oa(U(l[r]),L(l[r])));u.push(new Oa(U(n)+ka.text.slice(a.ch),L(n)));ka.update(ka.text.slice(0,d.ch)+U(l[0]),L(l[0]));t.insert(d.line+1,u)}else if(1==l.length)ka.update(ka.text.slice(0,d.ch)+U(l[0])+m.text.slice(a.ch),L(l[0])),t.remove(d.line+1,e,ab);else{u=[];ka.update(ka.text.slice(0,d.ch)+U(l[0]),L(l[0]));m.update(U(n)+m.text.slice(a.ch),L(n));r=1;for(p=l.length-1;r<p;++r)u.push(new Oa(U(l[r]),L(l[r])));1<e&&t.remove(d.line+1,e-1,ab);t.insert(d.line+ 1,u)}if(h.lineWrapping){var s=Math.max(5,q.clientWidth/Yb()-3);t.iter(d.line,d.line+l.length,function(d){if(!d.hidden){var a=Math.ceil(d.text.length/s)||1;a!=d.height&&j(d,a)}})}else t.iter(d.line,d.line+l.length,function(d){var a=d.text;!d.hidden&&a.length>k&&(pa=d,k=a.length,tb=!0,G=!1)}),G&&(bb=!0);da=Math.min(da,d.line);ub(400);e=l.length-e-1;sa.push({from:d.line,to:a.line+1,diff:e});if(h.onChange){for(r=0;r<l.length;++r)"string"!=typeof l[r]&&(l[r]=l[r].text);d={from:d,to:a,text:l};if(Pa){for(l= Pa;l.next;l=l.next);l.next=d}else Pa=d}cb(A(b),A(c),f.from.line<=Math.min(a.line,a.line+e)?f.from.line:f.from.line+e,f.to.line<=Math.min(a.line,a.line+e)?f.to.line:f.to.line+e)}}function ea(){var d=t.height*qa()+2*F.offsetTop;return 0.99*d>q.offsetHeight?d:!1}function ca(d){var a=ea();v.style.display=a?"block":"none";a?(wc.style.height=ra.style.minHeight=a+"px",v.style.height=q.clientHeight+"px",null!=d&&(v.scrollTop=q.scrollTop=d,vb&&setTimeout(function(){v.scrollTop==d&&(v.scrollTop=d+(d?-1:1), v.scrollTop=d)},0))):ra.style.minHeight="";wb.style.top=Qa*qa()+"px"}function xc(){pa=g(0);tb=!0;var d=pa.text.length;t.iter(1,t.size,function(a){var l=a.text;!a.hidden&&l.length>d&&(d=l.length,pa=a)});bb=!1}function W(d,a,l){function b(na){if(N(na,a))return na;if(!N(l,na))return c;var k=na.line+d.length-(l.line-a.line)-1,e=na.ch;na.line==l.line&&(e+=K(d).length-(l.ch-(l.line==a.line?a.ch:0)));return{line:k,ch:e}}a=A(a);l=l?A(l):a;d=lb(d);var c;ia(d,a,l,function(d){c=d;return{from:b(f.from),to:b(f.to)}}); return c}function S(d,a){ia(lb(d),f.from,f.to,function(d){return"end"==a?{from:d,to:d}:"start"==a?{from:f.from,to:f.from}:{from:f.from,to:d}})}function ia(d,a,l,b){var c=1==d.length?d[0].length+a.ch:K(d).length;b=b({line:a.line+d.length-1,ch:c});qc(a,l,d,b.from,b.to)}function yc(d,a,l){var b=d.line,c=a.line;if(b==c)return g(b).text.slice(d.ch,a.ch);var e=[g(b).text.slice(d.ch)];t.iter(b+1,c,function(d){e.push(d.text)});e.push(g(c).text.slice(0,a.ch));return e.join(l||"\n")}function Tb(d){return yc(f.from, f.to,d)}function ha(){Na||Zb.set(h.pollInterval,function(){X();ba&&ha()})}function db(){function d(){!X()&&!a?(a=!0,Zb.set(60,d)):(Na=!1,ha())}var a=!1;Na=!0;Zb.set(20,d)}function X(){if(!ba||Qc(y)||h.readOnly)return!1;var d=y.value;if(d==ja)return!1;xb||zc();ma=null;for(var a=0,l=Math.min(ja.length,d.length);a<l&&ja[a]==d[a];)++a;a<ja.length?f.from={line:f.from.line,ch:f.from.ch-(ja.length-a)}:yb&&z(f.from,f.to)&&(f.to={line:f.to.line,ch:Math.min(g(f.to.line).text.length,f.to.ch+(d.length-a))}); S(d.slice(a),"end");1E3<d.length?y.value=ja="":ja=d;xb||Ac();return!0}function zb(d){z(f.from,f.to)?d&&(ja=y.value=""):(ja="",y.value=Tb(),ba&&(d=y,$b?(d.selectionStart=0,d.selectionEnd=d.value.length):d.select()))}function aa(){"nocursor"!=h.readOnly&&y.focus()}function Bc(){var d=ta(f.inverted?f.from:f.to);return{x:h.lineWrapping?Math.min(d.x,F.offsetWidth):d.x,y:d.y,yBot:d.yBot}}function Cc(d,a,l,b){d=Dc(d,a,l,b);null!=d.scrollLeft&&(q.scrollLeft=d.scrollLeft);null!=d.scrollTop&&(v.scrollTop=q.scrollTop= d.scrollTop)}function Dc(d,a,l,b){var c=F.offsetLeft,e=F.offsetTop;a+=e;b+=e;d+=c;l+=c;var k=q.clientHeight,f=v.scrollTop,g={},j=ea()||Infinity,m=a<e+10,e=b+e>j-10;a<f?g.scrollTop=m?0:Math.max(0,a):b>f+k&&(g.scrollTop=(e?j:b)-k);a=q.clientWidth;b=q.scrollLeft;k=h.fixedGutter?$.clientWidth:0;c=d<k+c+10;d<b+k||c?(c&&(d=0),g.scrollLeft=Math.max(0,d-10-k)):l>a+b-3&&(g.scrollLeft=l+10-a);return g}function Ea(d){var a=qa(),l=(null!=d?d:v.scrollTop)-F.offsetTop;d=Math.max(0,Math.floor(l/a));a=Math.ceil((l+ q.clientHeight)/a);return{from:ac(t,d),to:ac(t,a)}}function Ba(d,a,l){function b(){var d=fa.firstChild,a=!1;t.iter(I,M,function(l){if(d){if(!l.hidden){var b=Math.round(d.offsetHeight/w)||1;l.height!=b&&(j(l,b),oa=a=!0)}d=d.nextSibling}});return a}if(q.clientWidth){var c=Ea(l);if(!0!==d&&0==d.length&&c.from>I&&c.to<M)ca(l);else{var e=Math.max(c.from-100,0),k=Math.min(t.size,c.to+100);I<e&&20>e-I&&(e=I);M>k&&20>M-k&&(k=Math.min(t.size,M));if(!0===d)d=[];else{for(var c=[{from:I,to:M,domStart:0}],f=0, g=d.length||0;f<g;++f){for(var n=d[f],p=[],u=n.diff||0,r=0,y=c.length;r<y;++r){var B=c[r];n.to<=B.from&&n.diff?p.push({from:B.from+u,to:B.to+u,domStart:B.domStart}):n.to<=B.from||n.from>=B.to?p.push(B):(n.from>B.from&&p.push({from:B.from,to:n.from,domStart:B.domStart}),n.to<B.to&&p.push({from:n.to+u,to:B.to+u,domStart:B.domStart+(n.to-B.from)}))}c=p}d=c}for(var C=d,c=d=0;c<C.length;++c)f=C[c],f.from<e&&(f.domStart+=e-f.from,f.from=e),f.to>k&&(f.to=k),f.from>=f.to?C.splice(c--,1):d+=f.to-f.from;if(d== k-e&&e==I&&k==M)ca(l);else{C.sort(function(d,a){return d.domStart-a.domStart});var w=qa();d=$.style.display;fa.style.display="none";c=e;f=k;g=function(d){var a=d.nextSibling;d.parentNode.removeChild(d);return a};if(C.length){for(var n=0,v=fa.firstChild,p=0;p<C.length;++p){for(u=C[p];u.domStart>n;)v=g(v),n++;for(var X=0,u=u.to-u.from;X<u;++X)v=v.nextSibling,n++}for(;v;)v=g(v)}else Ia(fa);var A=C.shift(),v=fa.firstChild,X=c;t.iter(c,f,function(d){A&&A.to==X&&(A=C.shift());if(!A||A.from>X){if(d.hidden)var a= s("pre");else a=m(d),d.className&&(a.className=d.className),d.bgClassName&&(d=s("pre","\u00a0",d.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2"),a=s("div",[d,a],null,"position: relative"));fa.insertBefore(a,v)}else v=v.nextSibling;++X});fa.style.display=$.style.display="";(c=e!=I||k!=M||Ec!=q.clientHeight+w)&&(Ec=q.clientHeight+w);(e!=I||k!=M&&h.onViewportChange)&&setTimeout(function(){if(h.onViewportChange)h.onViewportChange(D,e,k)});I=e;M=k;Qa=bc(t,e);ub(100); if(fa.childNodes.length!=M-I)throw Error("BAD PATCH! "+JSON.stringify(C)+" size="+(M-I)+" nodes="+fa.childNodes.length);h.lineWrapping&&b();$.style.display=d;(c||oa)&&xa()&&h.lineWrapping&&b()&&xa();ca(l);Fa();if(!a&&h.onUpdate)h.onUpdate(D);return!0}}}else I=M=Qa=0}function xa(){if(h.gutter||h.lineNumbers){var d=wb.offsetHeight,a=q.clientHeight;$.style.height=(2>d-a?a:d)+"px";var l=document.createDocumentFragment(),b=I,c;t.iter(I,Math.max(M,I+1),function(d){if(d.hidden)l.appendChild(s("pre"));else{var a= d.gutterMarker,Z=h.lineNumbers?h.lineNumberFormatter(b+h.firstLineNumber):null;a&&a.text?Z=a.text.replace("%N%",null!=Z?Z:""):null==Z&&(Z="\u00a0");var e=l.appendChild(s("pre",null,a&&a.style));e.innerHTML=Z;for(Z=1;Z<d.height;++Z)e.appendChild(s("br")),e.appendChild(document.createTextNode("\u00a0"));a||(c=b)}++b});$.style.display="none";Ia(Ra).appendChild(l);if(null!=c&&h.lineNumbers){for(var d=Ra.childNodes[c-I],a=String(t.size).length,e=d.firstChild.textContent||d.firstChild.innerText||d.firstChild.nodeValue|| "",f="";e.length+f.length<a;)f+="\u00a0";f&&d.insertBefore(document.createTextNode(f),d.firstChild)}$.style.display="";d=2<Math.abs((parseInt(F.style.marginLeft)||0)-$.offsetWidth);F.style.marginLeft=$.offsetWidth+"px";oa=!1;return d}}function Fa(){var d=z(f.from,f.to),a=ta(f.from,!0),b=d?a:ta(f.to,!0),c=f.inverted?a:b,e=qa(),g=Sa(Y),k=Sa(fa);Ja.style.top=Math.max(0,Math.min(q.offsetHeight,c.y+k.top-g.top))+"px";Ja.style.left=Math.max(0,Math.min(q.offsetWidth,c.x+k.left-g.left))+"px";if(d)V.style.top= c.y+"px",V.style.left=(h.lineWrapping?Math.min(c.x,F.offsetWidth):c.x)+"px",V.style.display="",Ab.style.display="none";else{var d=a.y==b.y,j=document.createDocumentFragment(),m=F.clientWidth||F.offsetWidth,c=F.clientHeight||F.offsetHeight,g=function(d,a,b,l){j.appendChild(s("div",null,"CodeMirror-selected","position: absolute; left: "+d+"px; top: "+a+"px; "+(Rc?"width: "+(!b?m:m-b-d)+"px":"right: "+b+"px")+"; height: "+l+"px"))};f.from.ch&&0<=a.y&&g(a.x,a.y,d?m-b.x:0,e);a=Math.max(0,a.y+(f.from.ch? e:0));k=Math.min(b.y,c)-a;k>0.2*e&&g(0,a,0,k);(!d||!f.from.ch)&&b.y<c-0.5*e&&g(0,b.y,m-b.x,e);Ia(Ab).appendChild(j);V.style.display="none";Ab.style.display=""}}function La(d){ma=d?ma||(f.inverted?f.to:f.from):null}function la(d,a){var b=ma&&A(ma);b&&(N(b,d)?d=b:N(a,b)&&(a=b));cb(d,a);Bb=!0}function cb(d,a,b,c){Cb=null;null==b&&(b=f.from.line,c=f.to.line);if(!z(f.from,d)||!z(f.to,a)){if(N(a,d)){var e=a;a=d;d=e}d.line!=b&&((b=va(d,b,f.from.ch))?d=b:cc(d.line,!1));a.line!=c&&(a=va(a,c,f.to.ch));z(d, a)?f.inverted=!1:z(d,f.to)?f.inverted=!1:z(a,f.from)&&(f.inverted=!0);if(h.autoClearEmptyLines&&z(f.from,f.to)&&(f.inverted?d:a).line!=f.from.line&&f.from.line<t.size){var G=g(f.from.line);/^\s+$/.test(G.text)&&setTimeout(n(function(){if(G.parent&&/^\s+$/.test(G.text)){var d=Ma(G);W("",{line:d,ch:0},{line:d,ch:G.text.length})}},10))}f.from=d;f.to=a;Ca=!0}}function va(d,a,b){function c(a){for(var Z=d.line+a,e=1==a?t.size:-1;Z!=e;){var na=g(Z);if(!na.hidden){a=d.ch;if(f||a>b||a>na.text.length)a=na.text.length; return{line:Z,ch:a}}Z+=a}}var e=g(d.line),f=d.ch==e.text.length&&d.ch!=b;return!e.hidden?d:d.line>=a?c(1)||c(-1):c(-1)||c(1)}function Da(d,a,b){d=A({line:d,ch:a||0});(b?la:cb)(d,d)}function Db(d){return Math.max(0,Math.min(d,t.size-1))}function A(d){if(0>d.line)return{line:0,ch:0};if(d.line>=t.size)return{line:t.size-1,ch:g(t.size-1).text.length};var a=d.ch,b=g(d.line).text.length;return null==a||a>b?{line:d.line,ch:b}:0>a?{line:d.line,ch:0}:d}function Ka(d,a){function b(a){if(h==(0>d?0:k.text.length)){if(a= !a)a:{a=e+d;for(var l=0>d?-1:t.size;a!=l;a+=d){var c=g(a);if(!c.hidden){e=a;k=c;a=!0;break a}}a=void 0}if(a)h=0>d?k.text.length:0;else return!1}else h+=d;return!0}var c=f.inverted?f.from:f.to,e=c.line,h=c.ch,k=g(e);if("char"==a)b();else if("column"==a)b(!0);else if("word"==a)for(c=!1;!(0>d)||b();){if(Eb(k.text.charAt(h)))c=!0;else if(c){0>d&&(d=1,b());break}if(0<d&&!b())break}return{line:e,ch:h}}function Wa(d){var a=g(d.line).text,b=d.ch,c=d.ch;if(a){!1===d.after||c==a.length?--b:++c;for(var e=a.charAt(b), e=Eb(e)?Eb:/\s/.test(e)?function(d){return/\s/.test(d)}:function(d){return!/\s/.test(d)&&!Eb(d)};0<b&&e(a.charAt(b-1));)--b;for(;c<a.length&&e(a.charAt(c));)++c}return{from:{line:d.line,ch:b},to:{line:d.line,ch:c}}}function Fb(d,a){a||(a="add");if("smart"==a)if(R.indent)var b=Ya(d);else a="prev";var c=g(d),e=c.indentation(h.tabSize),f=c.text.match(/^\s*/)[0],k;"smart"==a&&(k=R.indent(b,c.text.slice(f.length),c.text),k==sc&&(a="prev"));"prev"==a?k=d?g(d-1).indentation(h.tabSize):0:"add"==a?k=e+h.indentUnit: "subtract"==a&&(k=e-h.indentUnit);k=Math.max(0,k);b="";c=0;if(h.indentWithTabs)for(e=Math.floor(k/h.tabSize);e;--e)c+=h.tabSize,b+="\t";c<k&&(b+=Fc(k-c));b!=f&&W(b,{line:d,ch:0},{line:d,ch:f.length})}function hb(){R=p.getMode(h,h.mode);t.iter(0,t.size,function(d){d.stateAfter=null});da=0;ub(100)}function Rb(){if(h.lineWrapping){Y.className+=" CodeMirror-wrap";var d=q.clientWidth/Yb()-3;t.iter(0,t.size,function(a){if(!a.hidden){var b=Math.ceil(a.text.length/d)||1;1!=b&&j(a,b)}});F.style.minWidth=Gb.style.left= ""}else Y.className=Y.className.replace(" CodeMirror-wrap",""),xc(),t.iter(0,t.size,function(d){1!=d.height&&!d.hidden&&j(d,1)});sa.push({from:0,to:t.size})}function ib(){q.className=q.className.replace(/\s*cm-s-\S+/g,"")+h.theme.replace(/(^|\s)\s*/g," cm-s-")}function jb(){var d=ga[h.keyMap].style;Y.className=Y.className.replace(/\s*cm-keymap-\S+/g,"")+(d?" cm-keymap-"+d:"")}function Hb(d,a){this.lines=[];this.type=d;a&&(this.style=a)}function dc(d,a,b,c){d=A(d);a=A(a);var e=new Hb("range",b);if(c)for(var f in c)c.hasOwnProperty(f)&& (e[f]=c[f]);var g=d.line;t.iter(g,a.line+1,function(b){var c={from:g==d.line?d.ch:null,to:g==a.line?a.ch:null,marker:e};(b.markedSpans||(b.markedSpans=[])).push(c);e.lines.push(b);++g});sa.push({from:d.line,to:a.line+1});return e}function Gc(a,b){var c=a,e=a;"number"==typeof a?e=g(Db(a)):c=Ma(a);if(null!=c&&b(e,c))sa.push({from:c,to:c+1});else return null;return e}function cc(a,b){return Gc(a,function(a,d){if(a.hidden!=b){a.hidden=b;h.lineWrapping||(b&&a.text.length==pa.text.length?bb=!0:!b&&a.text.length> pa.text.length&&(pa=a,bb=!1));j(a,b?0:1);var c=f.from.line,e=f.to.line;if(b&&(c==d||e==d)){c=c==d?va({line:c,ch:0},c,0):f.from;e=e==d?va({line:e,ch:0},e,0):f.to;if(!e)return;cb(c,e)}return oa=!0}})}function ec(a,b){if(0==b)return{top:0,left:0};h.lineWrapping&&b<a.text.length&&Ib.test(a.text.slice(b-1,b+1));var c=m(a,b);Ia(Ta).appendChild(c);var c=c.anchor,e=c.offsetTop,f=c.offsetLeft;Ha&&(0==e&&0==f)&&(e=s("span","x"),c.parentNode.insertBefore(e,c.nextSibling),e=e.offsetTop);return{top:e,left:f}} function ta(a,b){var c,e=qa(),f=e*(bc(t,a.line)-(b?Qa:0));if(0==a.ch)c=0;else{var j=ec(g(a.line),a.ch);c=j.left;h.lineWrapping&&(f+=Math.max(0,j.top))}return{x:c,y:f,yBot:f+e}}function Jb(a,b){function c(a){a=ec(m,a);if(p){var d=Math.round(a.top/e);u=d!=B;return Math.max(0,a.left+(d-B)*q.clientWidth)}return a.left}var e=qa(),f=Yb(),j=Qa+Math.floor(b/e);if(0>j)return{line:0,ch:0};var k=ac(t,j);if(k>=t.size)return{line:t.size-1,ch:g(t.size-1).text.length};var m=g(k),n=m.text,p=h.lineWrapping,B=p?j- bc(t,k):0;if(0>=a&&0==B)return{line:k,ch:0};for(var u=!1,r=j=0,n=n.length,s,f=Math.min(n,Math.ceil((a+0.9*B*q.clientWidth)/f));;){var v=c(f);if(v<=a&&f<n)f=Math.min(n,Math.ceil(1.2*f));else{s=v;n=f;break}}if(a>s)return{line:k,ch:n};f=Math.floor(0.8*n);v=c(f);v<a&&(j=f,r=v);for(;;){if(1>=n-j)return s=a-r<s-a,{line:k,ch:s?j:n,after:s};f=Math.ceil((j+n)/2);v=c(f);v>a?(n=f,s=v,u&&(s+=1E3)):(j=f,r=v)}}function qa(){if(null==Ua){Ua=s("pre");for(var a=0;49>a;++a)Ua.appendChild(document.createTextNode("x")), Ua.appendChild(s("br"));Ua.appendChild(document.createTextNode("x"))}a=fa.clientHeight;if(a==Hc)return fc;Hc=a;a=Ua.cloneNode(!0);Ia(Ta).appendChild(a);fc=Ta.firstChild.offsetHeight/50||1;Ia(Ta);return fc}function Yb(){if(q.clientWidth==Ic)return Jc;Ic=q.clientWidth;var a=s("span","x"),b=s("pre",[a]);Ia(Ta).appendChild(b);return Jc=a.offsetWidth||10}function Za(a,b){var c=Sa(q,!0),e,f;try{e=a.clientX,f=a.clientY}catch(g){return null}if(!b&&(e-c.left>q.clientWidth||f-c.top>q.clientHeight))return null; c=Sa(F,!0);return Jb(e-c.left,f-c.top)}function Kc(a){function b(){Ja.style.position="relative";y.style.cssText=g;gc&&(v.scrollTop=e);ha();if(null!=y.selectionStart){clearTimeout(hc);var a=y.value=" "+(z(f.from,f.to)?"":y.value),d=0;ja=" ";y.selectionStart=1;y.selectionEnd=a.length;hc=setTimeout(function Pc(){" "==ja&&0==y.selectionStart?n(Ub.selectAll)(D):10>d++?hc=setTimeout(Pc,500):zb()},200)}}var c=Za(a),e=v.scrollTop;if(c&&!za){(z(f.from,f.to)||N(c,f.from)||!N(c,f.to))&&n(Da)(c.line,c.ch);var g= y.style.cssText;Ja.style.position="absolute";y.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";aa();zb(!0);z(f.from,f.to)&&(y.value=ja=" ");if(eb){kb(a);var h=w(window,"mouseup",function(){h();setTimeout(b,20)},!0)}else setTimeout(b,50)}}function rb(){clearInterval(Xb);var a=!0;V.style.visibility="";Xb=setInterval(function(){V.style.visibility= (a=!a)?"":"hidden"},h.cursorBlinkRate)}function Lc(a){var b=f.inverted?f.from:f.to,c=g(b.line),e=b.ch-1,h=0<=e&&ic[c.text.charAt(e)]||ic[c.text.charAt(++e)];if(h){h.charAt(0);for(var j=(h=">"==h.charAt(1))?1:-1,k=c.styles,m=e+1,q=0,p=k.length;q<p;q+=2)if(0>=(m-=k[q].length)){var B=k[q+1];break}k=[c.text.charAt(e)];m=/[(){}[\]]/;q=b.line;for(p=h?Math.min(q+100,t.size):Math.max(-1,q-100);q!=p;q+=j){var c=g(q),u=q==b.line,r;a:{r=u&&h?e+1:0;u=u&&!h?e:c.text.length;if(c.text)for(var s=c.styles,c=h?0:c.text.length- 1,v=void 0,C=h?0:s.length-2,y=h?s.length:-2;C!=y;C+=2*j){var w=s[C];if(s[C+1]!=B)c+=j*w.length;else for(var X=h?0:w.length-1,A=h?w.length:-1;X!=A;X+=j,c+=j)if(c>=r&&c<u&&m.test(v=w.charAt(X))){var D=ic[v];if(">"==D.charAt(1)==h)k.push(v);else if(k.pop()!=D.charAt(0)){r={pos:c,match:!1};break a}else if(!k.length){r={pos:c,match:!0};break a}}}r=void 0}if(r)break}r||(r={pos:null,match:!1});var B=r.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",F=dc({line:b.line,ch:e},{line:b.line, ch:e+1},B),aa=null!=r.pos&&dc({line:q,ch:r.pos},{line:q,ch:r.pos+1},B),b=n(function(){F.clear();aa&&aa.clear()});a?setTimeout(b,800):Aa=b}}function Ya(a){var b;a:{for(var c,e,f=a,j=a-40;f>j;--f){if(0==f){b=0;break a}var k=g(f-1);if(k.stateAfter){b=f;break a}k=k.indentation(h.tabSize);if(null==e||c>k)e=f-1,c=k}b=e}var m=b&&g(b-1).stateAfter,m=m?Va(R,m):Mc(R);t.iter(b,a,function(c){c.process(R,m,h.tabSize);c.stateAfter=b==a-1||0==b%5?Va(R,m):null});return m}function oc(){if(!(da>=M)){var a=+new Date+ h.workTime,b=Va(R,Ya(da)),c=da;t.iter(da,M,function(c){da>=I?(c.highlight(R,b,h.tabSize),c.stateAfter=Va(R,b)):(c.process(R,b,h.tabSize),c.stateAfter=0==da%5?Va(R,b):null);++da;if(+new Date>a)return ub(h.workDelay),!0});M>c&&da>=I&&n(function(){sa.push({from:c,to:da})})()}}function ub(a){da<M&&pc.set(a,oc)}function zc(){ya=Bb=Pa=null;sa=[];Ca=!1;ab=[]}function Ac(){bb&&xc();if(tb&&!h.lineWrapping){var a=Gb.offsetWidth,b=ec(pa,pa.text.length).left;jc||(Gb.style.left=b+"px",F.style.minWidth=b+a+"px"); tb=!1}var c,e;Ca&&(a=Bc(),c=Dc(a.x,a.y,a.x,a.yBot));if(sa.length||c&&null!=c.scrollTop)e=Ba(sa,!0,c&&c.scrollTop);e||(Ca&&Fa(),oa&&xa());if(c&&(a=Bc(),Cc(a.x,a.y,a.x,a.yBot),ba)){c=ra.getBoundingClientRect();b=null;if(0>a.y+c.top)b=!0;else if(a.y+c.top+qa()>(window.innerHeight||document.documentElement.clientHeight))b=!1;if(null!=b){if(c="none"==V.style.display)V.style.display="",V.style.left=a.x+"px",V.style.top=a.y-Qa+"px";V.scrollIntoView(b);c&&(V.style.display="none")}}Ca&&rb();ba&&(!0===ya|| !1!==ya&&Ca)&&zb(Bb);Ca&&h.matchBrackets&&setTimeout(n(function(){Aa&&(Aa(),Aa=null);z(f.from,f.to)&&Lc(!1)}),20);b=Ca;a=ab;if(Pa&&h.onChange&&D)h.onChange(D,Pa);if(b&&h.onCursorActivity)h.onCursorActivity(D);for(b=0;b<a.length;++b)a[b](D);if(e&&h.onUpdate)h.onUpdate(D)}function n(a){return function(){xb++||zc();try{var b=a.apply(this,arguments)}finally{--xb||Ac()}return b}}function rc(a){P.startCompound();try{return a()}finally{P.endCompound()}}var h={},kc=p.defaults,fb;for(fb in kc)kc.hasOwnProperty(fb)&& (h[fb]=(b&&b.hasOwnProperty(fb)?b:kc)[fb]);var y=s("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");y.setAttribute("wrap","off");y.setAttribute("autocorrect","off");y.setAttribute("autocapitalize","off");var Ja=s("div",[y],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),wc=s("div",null,"CodeMirror-scrollbar-inner"),v=s("div",[wc],"CodeMirror-scrollbar"),fa=s("div"),Ab=s("div",null,null,"position: relative; z-index: -1"),V=s("pre","\u00a0","CodeMirror-cursor"), Gb=s("pre","\u00a0","CodeMirror-cursor","visibility: hidden"),Ta=s("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),F=s("div",[Ta,V,Gb,Ab,fa],null,"position: relative; z-index: 0"),Ra=s("div",null,"CodeMirror-gutter-text"),$=s("div",[Ra],"CodeMirror-gutter"),wb=s("div",[$,s("div",[F],"CodeMirror-lines")],null,"position: relative"),ra=s("div",[wb],null,"position: relative"),q=s("div",[ra],"CodeMirror-scroll");q.setAttribute("tabIndex","-1");var Y= s("div",[Ja,v,q],"CodeMirror"+(h.lineWrapping?" CodeMirror-wrap":""));a.appendChild?a.appendChild(Y):a(Y);ib();jb();$b&&(y.style.width="0px");vb||(q.draggable=!0);F.style.outline="none";null!=h.tabindex&&(y.tabIndex=h.tabindex);h.autofocus&&aa();!h.gutter&&!h.lineNumbers&&($.style.display="none");lc&&(Ja.style.height="1px",Ja.style.position="absolute");Sc?(v.style.zIndex=-2,v.style.visibility="hidden"):jc&&(v.style.minWidth="18px");var Zb=new mc,pc=new mc,Xb,R,t=new Kb([new Lb([new Oa("")])]),da= 0,ba;hb();var f={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},ma,Mb,Nb,ua=0,mb,yb=!1,ob=!1,ya,Bb,sa,Pa,Ca,oa,ab,Qa=0,I=0,M=0,Ec=0,Aa,pa=g(0),bb=!1,tb=!0,Na=!1,Cb=null;n(function(){B(h.value||"");ya=!1})();var P=new Ob;w(q,"mousedown",n(function(a){function b(c){vb&&(q.draggable=!1);mb=!1;B();u();10>Math.abs(a.clientX-c.clientX)+Math.abs(a.clientY-c.clientY)&&(H(c),Da(k.line,k.ch,!0),aa())}function c(a){if("single"==m)la(k,a);else if("double"==m){var d=Wa(a);N(a,r)?la(d.from,s):la(r,d.to)}else"triple"== m&&(N(a,r)?la(s,A({line:a.line,ch:0})):la(r,A({line:a.line+1,ch:0})))}function e(a){var d=Za(a,!0);if(d&&!z(d,p)){ba||T();p=d;c(d);ya=!1;var b=Ea();if(d.line>=b.to||d.line<b.from)t=setTimeout(n(function(){e(a)}),150)}}function g(a){clearTimeout(t);var d=Za(a);d&&c(d);H(a);aa();ya=!0;v();B()}La(J(a,"shiftKey"));for(var j=a.target||a.srcElement;j!=Y;j=j.parentNode)if(j.parentNode==ra&&j!=wb)return;for(j=a.target||a.srcElement;j!=Y;j=j.parentNode)if(j.parentNode==Ra){if(h.onGutterClick)h.onGutterClick(D, Pb(Ra.childNodes,j)+I,a);return H(a)}var k=Za(a);switch(Nc(a)){case 3:eb&&Kc(a);return;case 2:k&&Da(k.line,k.ch,!0);setTimeout(aa,20);H(a);return}if(k){ba||T();var j=+new Date,m="single";Nb&&Nb.time>j-400&&z(Nb.pos,k)?(m="triple",H(a),setTimeout(aa,20),j=k.line,la({line:j,ch:0},A({line:j+1,ch:0}))):Mb&&Mb.time>j-400&&z(Mb.pos,k)?(m="double",Nb={time:j,pos:k},H(a),j=Wa(k),la(j.from,j.to)):Mb={time:j,pos:k};var p=k,t;if(h.dragDrop&&nc&&!h.readOnly&&!z(f.from,f.to)&&!N(k,f.from)&&!N(f.to,k)&&"single"== m){vb&&(q.draggable=!0);var B=w(document,"mouseup",n(b),!0),u=w(q,"drop",n(b),!0);mb=!0;q.dragDrop&&q.dragDrop()}else{H(a);"single"==m&&Da(k.line,k.ch,!0);var r=f.from,s=f.to,v=w(document,"mousemove",n(function(a){clearTimeout(t);H(a);!Ha&&!Nc(a)?g(a):e(a)}),!0),B=w(document,"mouseup",n(g),!0)}}else(a.target||a.srcElement)==q&&H(a)}));w(q,"dblclick",n(function(a){for(var b=a.target||a.srcElement;b!=Y;b=b.parentNode)if(b.parentNode==Ra)return H(a);H(a)}));w(F,"selectstart",H);eb||w(q,"contextmenu", Kc);w(q,"scroll",function(){h.fixedGutter&&$.style.left!=q.scrollLeft+"px"&&($.style.left=q.scrollLeft+"px");q.scrollTop!=ua&&(ua=q.scrollTop,v.scrollTop!=ua&&(v.scrollTop=ua),Ba([]));if(h.onScroll)h.onScroll(D)});w(v,"scroll",function(){v.scrollTop!=ua&&(ua=q.scrollTop=v.scrollTop,Ba([]))});w(v,"mousedown",function(){ba&&setTimeout(aa,0)});var Tc=w(window,"resize",function(){Y.parentNode?Ba(!0):Tc()},!0);w(y,"keyup",n(function(a){if(!h.onKeyEvent||!h.onKeyEvent(D,Xa(a)))16==J(a,"keyCode")&&(ma=null)})); w(y,"input",db);w(y,"keydown",n(vc));w(y,"keypress",n(function(a){Na&&X();if(!h.onKeyEvent||!h.onKeyEvent(D,Xa(a))){var b=J(a,"keyCode"),c=J(a,"charCode");if(za&&b==Wb)Wb=null,H(a);else if(!(za&&(!a.which||10>a.which)||lc)||!tc(a)){b=String.fromCharCode(null==c?b:c);h.electricChars&&R.electricChars&&h.smartIndent&&!h.readOnly&&-1<R.electricChars.indexOf(b)&&setTimeout(n(function(){Fb(f.to.line,"smart")}),75);if(b=qb("'"+b+"'",h.extraKeys,h.keyMap,function(a){return nb(a,!0)}))H(a),rb();b||db()}}})); w(y,"focus",T);w(y,"blur",O);h.dragDrop&&(w(q,"dragstart",Sb),w(q,"dragenter",c),w(q,"dragover",c),w(q,"drop",n(x)));w(q,"paste",function(){aa();db()});w(y,"paste",db);w(y,"cut",n(function(){h.readOnly||S("")}));lc&&w(ra,"mouseup",function(){document.activeElement==y&&y.blur();aa()});var Oc;try{Oc=document.activeElement==y}catch(Uc){}Oc||h.autofocus?setTimeout(T,20):O();var D=Y.CodeMirror={getValue:function(a){var b=[];t.iter(0,t.size,function(a){b.push(a.text)});return b.join(a||"\n")},setValue:n(B), getSelection:Tb,replaceSelection:n(S),focus:function(){window.focus();aa();T();db()},setOption:function(a,b){var c=h[a];h[a]=b;"mode"==a||"indentUnit"==a?hb():"readOnly"==a&&"nocursor"==b?(O(),y.blur()):"readOnly"==a&&!b?zb(!0):"theme"==a?ib():"lineWrapping"==a&&c!=b?n(Rb)():"tabSize"==a?Ba(!0):"keyMap"==a&&jb();if("lineNumbers"==a||"gutter"==a||"firstLineNumber"==a||"theme"==a||"lineNumberFormatter"==a)c=h.gutter||h.lineNumbers,$.style.display=c?"":"none",c?oa=!0:fa.parentNode.style.marginLeft=0, Ba(!0)},getOption:function(a){return h[a]},getMode:function(){return R},undo:n(function(){Q(P.done,P.undone)}),redo:n(function(){Q(P.undone,P.done)}),indentLine:n(function(a,b){"string"!=typeof b&&(b=null==b?h.smartIndent?"smart":"prev":b?"add":"subtract");e(a)&&Fb(a,b)}),indentSelection:n(function(a){if(z(f.from,f.to))return Fb(f.from.line,a);for(var b=f.to.line-(f.to.ch?0:1),c=f.from.line;c<=b;++c)Fb(c,a)}),historySize:function(){return{undo:P.done.length,redo:P.undone.length}},clearHistory:function(){P= new Ob},setHistory:function(a){P=new Ob;P.done=a.done;P.undone=a.undone},getHistory:function(){function a(d){for(var b=0,c=[],e;b<d.length;++b){c.push(e=[]);for(var f=0,g=d[b];f<g.length;++f){var h=[],j=g[f];e.push({start:j.start,added:j.added,old:h});for(var m=0;m<j.old.length;++m)h.push(U(j.old[m]))}}return c}return{done:a(P.done),undone:a(P.undone)}},matchBrackets:n(function(){Lc(!0)}),getTokenAt:n(function(a){a=A(a);return g(a.line).getTokenAt(R,Ya(a.line),h.tabSize,a.ch)}),getStateAfter:function(a){a= Db(null==a?t.size-1:a);return Ya(a+1)},cursorCoords:function(a,b){null==a&&(a=f.inverted);return this.charCoords(a?f.from:f.to,b)},charCoords:function(a,b){a=A(a);if("local"==b)return ta(a,!1);if("div"==b)return ta(a,!0);var c=ta(a,!0),e=Sa(F);return{x:e.left+c.x,y:e.top+c.y,yBot:e.top+c.yBot}},coordsChar:function(a){var b=Sa(F);return Jb(a.x-b.left,a.y-b.top)},markText:n(dc),setBookmark:function(a){a=A(a);var b=new Hb("bookmark"),c=g(a.line);a={from:a.ch,to:a.ch,marker:b};(c.markedSpans||(c.markedSpans= [])).push(a);b.lines.push(c);return b},findMarksAt:function(a){a=A(a);var b=[],c=g(a.line).markedSpans;if(c)for(var e=0;e<c.length;++e){var f=c[e];(null==f.from||f.from<=a.ch)&&(null==f.to||f.to>=a.ch)&&b.push(f.marker)}return b},setMarker:n(function(a,b,c){"number"==typeof a&&(a=g(Db(a)));a.gutterMarker={text:b,style:c};oa=!0;return a}),clearMarker:n(function(a){"number"==typeof a&&(a=g(Db(a)));a.gutterMarker=null;oa=!0}),setLineClass:n(function(a,b,c){return Gc(a,function(a){if(a.className!=b|| a.bgClassName!=c)return a.className=b,a.bgClassName=c,!0})}),hideLine:n(function(a){return cc(a,!0)}),showLine:n(function(a){return cc(a,!1)}),onDeleteLine:function(a,b){if("number"==typeof a){if(!e(a))return null;a=g(a)}(a.handlers||(a.handlers=[])).push(b);return a},lineInfo:function(a){if("number"==typeof a){if(!e(a))return null;var b=a;a=g(a);if(!a)return null}else if(b=Ma(a),null==b)return null;var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&c.text,markerClass:c&&c.style, lineClass:a.className,bgClass:a.bgClassName}},getViewport:function(){return{from:I,to:M}},addWidget:function(a,b,c,e,f){a=ta(A(a));var g=a.yBot,h=a.x;b.style.position="absolute";ra.appendChild(b);if("over"==e)g=a.y;else if("near"==e){e=Math.max(q.offsetHeight,t.height*qa());var j=Math.max(ra.clientWidth,F.clientWidth)-F.offsetLeft;a.yBot+b.offsetHeight>e&&a.y>b.offsetHeight&&(g=a.y-b.offsetHeight);h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+F.offsetTop+"px";b.style.left=b.style.right=""; "right"==f?(h=ra.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==f?h=0:"middle"==f&&(h=(ra.clientWidth-b.offsetWidth)/2),b.style.left=h+F.offsetLeft+"px");c&&Cc(h,g,h+b.offsetWidth,g+b.offsetHeight)},lineCount:function(){return t.size},clipPos:A,getCursor:function(a){null==a&&(a=f.inverted);return{line:(a?f.from:f.to).line,ch:(a?f.from:f.to).ch}},somethingSelected:function(){return!z(f.from,f.to)},setCursor:n(function(a,b,c){null==b&&"number"==typeof a.line?Da(a.line,a.ch,c):Da(a,b,c)}),setSelection:n(function(a, b,c){(c?la:cb)(A(a),A(b||a))}),getLine:function(a){if(e(a))return g(a).text},getLineHandle:function(a){if(e(a))return g(a)},setLine:n(function(a,b){e(a)&&W(b,{line:a,ch:0},{line:a,ch:g(a).text.length})}),removeLine:n(function(a){e(a)&&W("",{line:a,ch:0},A({line:a+1,ch:0}))}),replaceRange:n(W),getRange:function(a,b,c){return yc(A(a),A(b),c)},triggerOnKeyDown:n(vc),execCommand:function(a){return Ub[a](D)},moveH:n(function(a,b){var c=0>a?f.from:f.to;if(ma||z(f.from,f.to))c=Ka(a,b);Da(c.line,c.ch,!0)}), deleteH:n(function(a,b){z(f.from,f.to)?0>a?W("",Ka(a,b),f.to):W("",f.from,Ka(a,b)):W("",f.from,f.to);Bb=!0}),moveV:n(function(a,b){var c=ta(f.inverted?f.from:f.to,!0);null!=Cb&&(c.x=Cb);if("page"==b)var e=Math.min(q.clientHeight,window.innerHeight||document.documentElement.clientHeight),e=Jb(c.x,c.y+e*a);else"line"==b&&(e=qa(),e=Jb(c.x,c.y+0.5*e+a*e));"page"==b&&(v.scrollTop+=ta(e,!0).y-c.y);Da(e.line,e.ch,!0);Cb=c.x}),toggleOverwrite:function(){yb?(yb=!1,V.className=V.className.replace(" CodeMirror-overwrite", "")):(yb=!0,V.className+=" CodeMirror-overwrite")},posFromIndex:function(a){var b=0,c;t.iter(0,t.size,function(e){e=e.text.length+1;if(e>a)return c=a,!0;a-=e;++b});return A({line:b,ch:c})},indexFromPos:function(a){if(0>a.line||0>a.ch)return 0;var b=a.ch;t.iter(0,a.line,function(a){b+=a.text.length+1});return b},scrollTo:function(a,b){null!=a&&(q.scrollLeft=a);null!=b&&(v.scrollTop=q.scrollTop=b);Ba([])},getScrollInfo:function(){return{x:q.scrollLeft,y:v.scrollTop,height:v.scrollHeight,width:q.scrollWidth}}, setSize:function(a,b){function c(a){a=String(a);return/^\d+$/.test(a)?a+"px":a}null!=a&&(Y.style.width=c(a));null!=b&&(q.style.height=c(b));D.refresh()},operation:function(a){return n(a)()},compoundChange:function(a){return rc(a)},refresh:function(){Ba(!0,null,ua);v.scrollHeight>ua&&(v.scrollTop=ua)},getInputField:function(){return y},getWrapperElement:function(){return Y},getScrollerElement:function(){return q},getGutterElement:function(){return $}},uc,Wb=null,ja="";Hb.prototype.clear=n(function(){for(var a= Infinity,b=-Infinity,c=0;c<this.lines.length;++c){var e=this.lines[c],f=sb(e.markedSpans,this,!0);if(null!=f.from||null!=f.to)e=Ma(e),a=Math.min(a,e),b=Math.max(b,e)}Infinity!=a&&sa.push({from:a,to:b+1});this.lines.length=0});Hb.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var e=this.lines[c],f=sb(e.markedSpans,this);if(null!=f.from||null!=f.to)e=Ma(e),null!=f.from&&(a={line:e,ch:f.from}),null!=f.to&&(b={line:e,ch:f.to})}return"bookmark"==this.type?a:a&&{from:a,to:b}};var fc, Hc,Ua,Jc,Ic=0,hc,ic={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},xb=0,gb;for(gb in Qb)Qb.propertyIsEnumerable(gb)&&!D.propertyIsEnumerable(gb)&&(D[gb]=Qb[gb]);return D}function Vb(a){return"string"==typeof a?ga[a]:a}function qb(a,b,c,e,g){function j(b){b=Vb(b);var c=b[a];if(!1===c)return g&&g(),!0;if(null!=c&&e(c))return!0;if(b.nofallthrough)return g&&g(),!0;b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return j(b);for(var c=0,p=b.length;c<p;++c)if(j(b[c]))return!0; return!1}return b&&j(b)?!0:j(c)}function Va(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},e;for(e in b){var g=b[e];g instanceof Array&&(g=g.concat([]));c[e]=g}return c}function Mc(a,b,c){return a.startState?a.startState(b,c):!0}function Ea(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8}function sb(a,b,c){if(a)for(var e=0;e<a.length;++e){var g=a[e];if(g.marker==b)return c&&a.splice(e,1),g}}function U(a){return"string"==typeof a?a:a.text}function L(a){return"string"== typeof a?null:a.markedSpans}function $a(a,b){return b?{text:a,markedSpans:b}:a}function hb(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c){var e=b[c].marker.lines,g=Pb(e,a);e.splice(g,1)}a.markedSpans=null}}function Rb(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.lines.push(a);a.markedSpans=b}}function Oa(a,b){this.text=a;this.height=1;Rb(this,b)}function Lb(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,e=0;b<c;++b)a[b].parent=this,e+=a[b].height;this.height=e}function Kb(a){this.children= a;for(var b=0,c=0,e=0,g=a.length;e<g;++e){var j=a[e],b=b+j.chunkSize(),c=c+j.height;j.parent=this}this.size=b;this.height=c;this.parent=null}function Ma(a){if(null==a.parent)return null;var b=a.parent;a=Pb(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var e=0;c.children[e]!=b;++e)a+=c.children[e].chunkSize();return a}function ac(a,b){var c=0;a:do{for(var e=0,g=a.children.length;e<g;++e){var j=a.children[e],m=j.height;if(b<m){a=j;continue a}b-=m;c+=j.chunkSize()}return c}while(!a.lines);e=0;for(g= a.lines.length;e<g;++e){j=a.lines[e].height;if(b<j)break;b-=j}return c+e}function bc(a,b){var c=0;a:do{for(var e=0,g=a.children.length;e<g;++e){var j=a.children[e],m=j.chunkSize();if(b<m){a=j;continue a}b-=m;c+=j.height}return c}while(!a.lines);for(e=0;e<b;++e)c+=a.lines[e].height;return c}function Ob(){this.time=0;this.done=[];this.undone=[];this.compound=0;this.closed=!1}function oc(){kb(this)}function Xa(a){a.stop||(a.stop=oc);return a}function H(a){a.preventDefault?a.preventDefault():a.returnValue= !1}function ib(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function kb(a){H(a);ib(a)}function Nc(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));pb&&(a.ctrlKey&&1==b)&&(b=3);return b}function J(a,b){return a.override&&a.override.hasOwnProperty(b)?a.override[b]:a[b]}function w(a,b,c,e){if("function"==typeof a.addEventListener){if(a.addEventListener(b,c,!1),e)return function(){a.removeEventListener(b,c,!1)}}else{var g=function(a){c(a||window.event)};a.attachEvent("on"+ b,g);if(e)return function(){a.detachEvent("on"+b,g)}}}function mc(){this.id=null}function Ka(a,b,c){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var e=0,g=0;e<b;++e)"\t"==a.charAt(e)?g+=c-g%c:++g;return g}function Sa(a,b){try{var c=a.getBoundingClientRect(),c={top:c.top,left:c.left}}catch(e){c={top:0,left:0}}if(!b)if(null==window.pageYOffset){var g=document.documentElement||document.body.parentNode;null==g.scrollTop&&(g=document.body);c.top+=g.scrollTop;c.left+=g.scrollLeft}else c.top+= window.pageYOffset,c.left+=window.pageXOffset;return c}function Fc(a){for(;La.length<=a;)La.push(K(La)+" ");return La[a]}function K(a){return a[a.length-1]}function z(a,b){return a.line==b.line&&a.ch==b.ch}function N(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function s(a,b,c,e){a=document.createElement(a);c&&(a.className=c);e&&(a.style.cssText=e);if("string"==typeof b)jb(a,b);else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function Ia(a){a.innerHTML="";return a}function jb(a, b){gc?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function Pb(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,e=a.length;c<e;++c)if(a[c]==b)return c;return-1}function Eb(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()}p.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1, fixedGutter:!1,firstLineNumber:1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(a){return a}};var $b=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),pb=$b||/Mac/.test(navigator.platform);/Win/.test(navigator.platform); var va=p.modes={},wa=p.mimeModes={};p.defineMode=function(a,b){!p.defaults.mode&&"null"!=a&&(p.defaults.mode=a);if(2<arguments.length){b.dependencies=[];for(var c=2;c<arguments.length;++c)b.dependencies.push(arguments[c])}va[a]=b};p.defineMIME=function(a,b){wa[a]=b};p.resolveMode=function(a){if("string"==typeof a&&wa.hasOwnProperty(a))a=wa[a];else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return p.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};p.getMode= function(a,b){b=p.resolveMode(b);var c=va[b.name];if(!c)return p.getMode(a,"text/plain");c=c(a,b);if(xa.hasOwnProperty(b.name)){var e=xa[b.name],g;for(g in e)e.hasOwnProperty(g)&&(c[g]=e[g])}c.name=b.name;return c};p.listModes=function(){var a=[],b;for(b in va)va.propertyIsEnumerable(b)&&a.push(b);return a};p.listMIMEs=function(){var a=[],b;for(b in wa)wa.propertyIsEnumerable(b)&&a.push({mime:b,mode:wa[b]});return a};var Qb=p.extensions={};p.defineExtension=function(a,b){Qb[a]=b};var xa=p.modeExtensions= {};p.extendMode=function(a,b){var c=xa.hasOwnProperty(a)?xa[a]:xa[a]={},e;for(e in b)b.hasOwnProperty(e)&&(c[e]=b[e])};var Ub=p.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),e=!z(b,c);!e&&a.getLine(b.line).length==b.ch?a.replaceRange("",b,{line:b.line+1,ch:0}):a.replaceRange("",b,e?c:{line:b.line})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()}, redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(a.getCursor().line,0,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=a.getLine(b.line),c=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=c&&b.ch?0:c,!0)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1, "page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")}, indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t","end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n", "end");a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},ga=p.keyMap={};ga.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};ga.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo", "Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};ga.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine", "Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]}; ga["default"]=pb?ga.macDefault:ga.pcDefault;ga.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};p.fromTextArea=function(a,b){function c(){a.value=s.getValue()}b||(b={});b.value= a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);if(null==b.autofocus){var e=document.body;try{e=document.activeElement}catch(g){}b.autofocus=e==a||null!=a.getAttribute("autofocus")&&e==document.body}if(a.form){var j=w(a.form,"submit",c,!0);if("function"==typeof a.form.submit){var m=a.form.submit;a.form.submit=function Sb(){c();a.form.submit=m;a.form.submit();a.form.submit=Sb}}}a.style.display="none";var s=p(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);s.save=c;s.getTextArea= function(){return a};s.toTextArea=function(){c();a.parentNode.removeChild(s.getWrapperElement());a.style.display="";a.form&&(j(),"function"==typeof a.form.submit&&(a.form.submit=m))};return s};var eb=/gecko\/\d{7}/i.test(navigator.userAgent),Ha=/MSIE \d/.test(navigator.userAgent),jc=/MSIE [1-7]\b/.test(navigator.userAgent),gc=/MSIE [1-8]\b/.test(navigator.userAgent),Rc=Ha&&5==document.documentMode,vb=/WebKit\//.test(navigator.userAgent),x=/Chrome\//.test(navigator.userAgent),za=/Opera\//.test(navigator.userAgent), pc=/Apple Computer/.test(navigator.vendor),lc=/KHTML\//.test(navigator.userAgent),Sc=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);p.copyState=Va;p.startState=Mc;p.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);b=c.state;a=c.mode}return c||{mode:a,state:b}};Ea.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}, eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){return Ka(this.string, this.start,this.tabSize)},indentation:function(){return Ka(this.string,null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){if((c?this.string.toLowerCase():this.string).indexOf(c?a.toLowerCase():a,this.pos)==this.pos)return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)}};p.StringStream=Ea;var Wa=" ";eb||Ha&&!jc?Wa="\u200b": za&&(Wa="");Oa.prototype={update:function(a,b){this.text=a;this.stateAfter=this.styles=null;hb(this);Rb(this,b)},highlight:function(a,b,c){c=new Ea(this.text,c);var e=this.styles||(this.styles=[]),g=e.length=0;for(""==this.text&&a.blankLine&&a.blankLine(b);!c.eol();){var j=a.token(c,b),m=c.current();c.start=c.pos;g&&e[g-1]==j?e[g-2]+=m:m&&(e[g++]=m,e[g++]=j);if(5E3<c.pos){e[g++]=this.text.slice(c.pos);e[g++]=null;break}}},process:function(a,b,c){c=new Ea(this.text,c);for(""==this.text&&a.blankLine&& a.blankLine(b);!c.eol()&&5E3>=c.pos;)a.token(c,b),c.start=c.pos},getTokenAt:function(a,b,c,e){for(c=new Ea(this.text,c);c.pos<e&&!c.eol();){c.start=c.pos;var g=a.token(c,b)}return{start:c.start,end:c.pos,string:c.current(),className:g||null,state:b}},indentation:function(a){return Ka(this.text,null,a)},getContent:function(a,b,c){function e(b,c,e){if(c){j&&(Ha&&" "==c.charAt(0))&&(c="\u00a0"+c.slice(1));j=!1;if(p.test(c))for(var g=document.createDocumentFragment(),w=0;;){p.lastIndex=w;var x=p.exec(c), z=x?x.index-w:c.length-w;z&&(g.appendChild(document.createTextNode(c.slice(w,w+z))),m+=z);if(!x)break;w+=z+1;"\t"==x[0]?(x=a-m%a,g.appendChild(s("span",Fc(x),"cm-tab")),m+=x):(z=s("span","\u2022","cm-invalidchar"),z.title="\\u"+x[0].charCodeAt(0).toString(16),g.appendChild(z),m+=1)}else{m+=c.length;var g=document.createTextNode(c)}e?b.appendChild(s("span",[g],e)):b.appendChild(g)}}function g(a){return!a?null:"cm-"+a.replace(/ +/g," cm-")}var j=!0,m=0,p=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g, w=s("pre"),z=e;if(null!=b)var x=0,H=w.anchor=s("span"),z=function(a,g,j){var m=g.length;if(b>=x&&b<x+m){b>x&&(e(a,g.slice(0,b-x),j),c&&a.appendChild(s("wbr")));a.appendChild(H);var p=b-x;e(H,za?g.slice(p,p+1):g.slice(p),j);za&&e(a,g.slice(p+1),j);b--;x+=m}else x+=m,e(a,g,j),x==b&&x==J?(jb(H,Wa),a.appendChild(H)):x>b+10&&/\s/.test(g)&&(z=function(){})};var N=this.styles,T=this.text,O=this.markedSpans,J=T.length;if(!T&&null==b)z(w," ");else if(!O||!O.length)for(O=T=0;O<J;T+=2){var Q=N[T],U=N[T+1],ea= Q.length;O+ea>J&&(Q=Q.slice(0,J-O));O+=ea;z(w,Q,g(U))}else{O.sort(function(a,b){return a.from-b.from});for(var T=Q=0,ea="",ca=O[0].from||0,L=[],W=0;Q<J;){if(ca==Q){for(ca=void 0;W<O.length&&((ca=O[W]).from==Q||null==ca.from);)"range"==ca.marker.type&&L.push(ca),++W;for(var ca=W<O.length?O[W].from:Infinity,S=0;S<L.length;++S){var ia=L[S].to;null==ia&&(ia=Infinity);ia==Q?L.splice(S--,1):ca=Math.min(ia,ca)}}for(S=Math.min(J,ca);;){if(ea){for(var ia=Q+ea.length,K=U,ga=0;ga<L.length;++ga){var ha=L[ga], K=(K?K+" ":"")+ha.marker.style;ha.marker.endStyle&&ha.to===Math.min(ia,S)&&(K+=" "+ha.marker.endStyle);ha.marker.startStyle&&ha.from===Q&&(K+=" "+ha.marker.startStyle)}z(w,ia>S?ea.slice(0,S-Q):ea,K);if(ia>=S){ea=ea.slice(S-Q);Q=S;break}Q=ia}ea=N[T++];U=g(N[T++])}}}return w},cleanUp:function(){this.parent=null;hb(this)}};Lb.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var e=a,g=a+b;e<g;++e){var j=this.lines[e];this.height-=j.height;j.cleanUp();if(j.handlers)for(var m= 0;m<j.handlers.length;++m)c.push(j.handlers[m])}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Kb.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var e=0;e<this.children.length;++e){var g= this.children[e],j=g.chunkSize();if(a<j){var m=Math.min(b,j-a),p=g.height;g.remove(a,m,c);this.height-=p-g.height;j==m&&(this.children.splice(e--,1),g.parent=null);if(0==(b-=m))break;a=0}else a-=j}25>this.size-b&&(a=[],this.collapse(a),this.children=[new Lb(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){for(var c=0,e=0,g=b.length;e<g;++e)c+=b[e].height;this.insertHeight(a,b,c)},insertHeight:function(a, b,c){this.size+=b.length;this.height+=c;for(var e=0,g=this.children.length;e<g;++e){var j=this.children[e],m=j.chunkSize();if(a<=m){j.insertHeight(a,b,c);if(j.lines&&50<j.lines.length){for(;50<j.lines.length;)a=j.lines.splice(j.lines.length-25,25),a=new Lb(a),j.height-=a.height,this.children.splice(e+1,0,a),a.parent=this;this.maybeSpill()}break}a-=m}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Kb(b);if(a.parent){a.size-= b.size;a.height-=b.height;var c=Pb(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Kb(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var e=0,g=this.children.length;e<g;++e){var j=this.children[e],m=j.chunkSize();if(a<m){m=Math.min(b,m-a);if(j.iterN(a,m,c))return!0;if(0==(b-=m))break;a=0}else a-=m}}};Ob.prototype={addChange:function(a,b,c){this.undone.length= 0;var e=+new Date,g=K(this.done),j=g&&K(g),m=e-this.time;if(this.compound&&g&&!this.closed)g.push({start:a,added:b,old:c});else if(400<m||!j||this.closed||j.start>a+c.length||j.start+j.added<a)this.done.push([{start:a,added:b,old:c}]),this.closed=!1;else{for(var g=Math.max(0,j.start-a),m=Math.max(0,a+c.length-(j.start+j.added)),p=g;0<p;--p)j.old.unshift(c[p-1]);for(p=m;0<p;--p)j.old.push(c[c.length-p]);g&&(j.start=a);j.added+=b-(c.length-g-m)}this.time=e},startCompound:function(){this.compound++|| (this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}};p.e_stop=kb;p.e_preventDefault=H;p.e_stopPropagation=ib;p.connect=w;mc.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};var sc=p.Pass={toString:function(){return"CodeMirror.Pass"}},nc;if(gc)nc=!1;else{var Fa=s("div");nc="draggable"in Fa||"dragDrop"in Fa}Fa=s("textarea");Fa.value="foo\nbar";Fa.value.indexOf("\r");var Ib=/^$/;eb?Ib=/$'/:pc?Ib=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:x&&(Ib=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/); var La=[""],lb=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],e=a.length;b<=e;){var g=a.indexOf("\n",b);-1==g&&(g=a.length);var j=a.slice(b,"\r"==a.charAt(g-1)?g-1:g),m=j.indexOf("\r");-1!=m?(c.push(j.slice(0,m)),b+=m+1):(c.push(j),b=g+1)}return c}:function(a){return a.split(/\r\n?|\n/)};p.splitLines=lb;var Qc=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return!b|| b.parentElement()!=a?!1:0!=b.compareEndPoints("StartToEnd",b)};p.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});p.defineMIME("text/plain","null");var Ga={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",", 189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};p.keyNames=Ga;for(x=0;10>x;x++)Ga[x+48]=String(x);for(x=65;90>=x;x++)Ga[x]=String.fromCharCode(x);for(x=1;12>=x;x++)Ga[x+111]=Ga[x+63235]="F"+x;p.version="2.34";return p}();